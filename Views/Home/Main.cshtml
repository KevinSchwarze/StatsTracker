@{
    ViewData["Title"] = "Baseball Stats Application";
}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewData["Title"]</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- DataTables CSS -->
    <link href="https://cdn.datatables.net/1.13.1/css/jquery.dataTables.min.css" rel="stylesheet">
</head>

<body>
    <div class="container mt-5">
        <h1 class="text-center mb-4">@ViewData["Title"]</h1>

        <div class="card mb-4">
            <div class="card-header">Add New Game</div>
            <div class="card-body">
                <form id="addGameForm">
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="playerName" class="form-label">Player Name</label>
                            <input type="text" class="form-control" id="playerName" placeholder="Enter player name" required>
                        </div>
                        <div class="col-md-6">
                            <label for="gameDate" class="form-label">Game Date</label>
                            <input type="date" class="form-control" id="gameDate" required>
                        </div>
                    </div>

                    <h5>Batting Stats</h5>
                    <div class="row mb-3">
                        <div class="col-md-3">
                            <label for="atBats" class="form-label">AB</label>
                            <input type="number" class="form-control" id="atBats" value="0" required>
                        </div>
                        <div class="col-md-3">
                            <label for="hits" class="form-label">H</label>
                            <input type="number" class="form-control" id="hits" value="0" required>
                        </div>
                        <div class="col-md-3">
                            <label for="homeRuns" class="form-label">HR</label>
                            <input type="number" class="form-control" id="homeRuns" value="0">
                        </div>
                        <div class="col-md-3">
                            <label for="runs" class="form-label">R</label>
                            <input type="number" class="form-control" id="runs" value="0">
                        </div>
                    </div>

                    <h5>Pitching Stats</h5>
                    <div class="row mb-3">
                        <div class="col-md-3">
                            <label for="wins" class="form-label">W</label>
                            <input type="number" class="form-control" id="wins" value="0">
                        </div>
                        <div class="col-md-3">
                            <label for="losses" class="form-label">L</label>
                            <input type="number" class="form-control" id="losses" value="0">
                        </div>
                        <div class="col-md-3">
                            <label for="strikeOuts" class="form-label">SO</label>
                            <input type="number" class="form-control" id="strikeOuts" value="0">
                        </div>
                        <div class="col-md-3">
                            <label for="inningsPitched" class="form-label">IP</label>
                            <input type="number" step="0.1" class="form-control" id="inningsPitched" value="0">
                        </div>
                    </div>

                    <button type="submit" class="btn btn-primary">Add Game</button>
                </form>
            </div>
        </div>

        <div class="card">
            <div class="card-header">Player Stats</div>
            <div class="card-body">
                <table id="playerStatsTable" class="display" style="width:100%">
                    <thead>
                        <tr>
                            <th>Player Name</th>
                            <th>Games Played</th>
                            <th>AB</th>
                            <th>H</th>
                            <th>HR</th>
                            <th>R</th>
                            <th>W</th>
                            <th>L</th>
                            <th>SO</th>
                            <th>IP</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Data populated dynamically -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- DataTables JS -->
    <script src="https://cdn.datatables.net/1.13.1/js/jquery.dataTables.min.js"></script>

    <script>
$('#addGameForm').on('submit', function (e) {
            e.preventDefault();
            const gameData = {
                playerName: $('#playerName').val(),
                gameDate: $('#gameDate').val(),
                atBats: parseInt($('#atBats').val()),
                hits: parseInt($('#hits').val()),
                homeRuns: parseInt($('#homeRuns').val()),
                runs: parseInt($('#runs').val()),
                wins: parseInt($('#wins').val()),
                losses: parseInt($('#losses').val()),
                strikeOuts: parseInt($('#strikeOuts').val()),
                inningsPitched: parseFloat($('#inningsPitched').val())
            };

            $.ajax({
                url: '@Url.Action("AddGame", "Home")',
                type: 'POST',
                contentType: 'application/json',
                data: JSON.stringify(gameData),
                success: function (response) {
                    alert(response.message);
                    // Optionally, refresh or update your data table here
                },
                error: function (xhr) {
                    alert('Failed to add game: ' + xhr.responseText);
                }
            });
});
    </script>
</body>

</html>
